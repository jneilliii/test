name: issue validator
on:
  workflow_dispatch:
  issues:
    types: [opened, edited]

permissions:
  issues: write

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: Okabe-Junya/issue-validator@v0.4.1
        id: validator
        with:
          body: /\[(octoprint\.log)\]/g
          body-regex-flags: 'true'
          is-auto-close: 'true'
          github-token: ${{ secrets.GITHUB_TOKEN }}
      - run:   echo "$OUTPUTS"
        shell: bash
        env:
          OUTPUTS: ${{ toJSON(steps.validator.outputs) }}
